<ng-template #t let-panel>
  <h4 id="{{panel.id}}-header" class="usa-accordion__heading">
    <button class="usa-accordion__button" [UsaAccordionToggle]="panel" (keyup)="onKeyUp($event, panel)">
      {{panel.title}}<ng-template [ngTemplateOutlet]="panel.titleTpl?.templateRef"></ng-template>
    </button>
  </h4>
</ng-template>
<ng-template ngFor let-panel [ngForOf]="panels">
    <ng-template [ngTemplateOutlet]="panel.headerTpl?.templateRef || t"
                  [ngTemplateOutletContext]="{$implicit: panel, opened: panel.isOpen}"></ng-template>
    <section id="{{panel.id}}" [attr.aria-labelledby]="panel.id + '-header'" 
      *ngIf="!destroyOnHide || panel.isOpen || panel.transitionRunning" class="usa-accordion__content">
        <ng-template [ngTemplateOutlet]="panel.contentTpl?.templateRef || null"></ng-template>
    </section>
</ng-template>
